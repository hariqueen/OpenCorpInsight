<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ page isELIgnored="true" %>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Í∏∞ÏóÖ ÎπÑÍµê Î∂ÑÏÑù</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 40px;
        }

        .user-icon {
            width: 50px;
            height: 50px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
        }

        .ai-chat {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #00d4ff, #0099cc);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 16px;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(0, 212, 255, 0.4);
            transition: transform 0.2s;
        }

        .ai-chat:hover {
            transform: scale(1.1);
        }

        .main-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .vs-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .vs-title {
            font-size: 48px;
            font-weight: 300;
            letter-spacing: 8px;
            opacity: 0.9;
        }

        .companies-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 0 50px;
        }

        .company-name {
            font-size: 32px;
            font-weight: 600;
            text-align: center;
        }

        .company-left {
            color: #ff9a9e;
        }

        .company-right {
            color: #a8edea;
        }

        .comparison-grid {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .comparison-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 40px;
        }

        .metric-card {
            flex: 1;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
            position: relative;
            overflow: hidden;
        }

        .metric-card.winner {
            background: rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(255, 255, 255, 0.1);
        }

        .metric-card.left {
            background: linear-gradient(135deg, rgba(255, 154, 158, 0.2), rgba(255, 154, 158, 0.1));
        }

        .metric-card.right {
            background: linear-gradient(135deg, rgba(168, 237, 234, 0.2), rgba(168, 237, 234, 0.1));
        }

        .metric-label {
            font-size: 16px;
            opacity: 0.8;
            margin-bottom: 10px;
            font-weight: 500;
        }

        .metric-value {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .metric-unit {
            font-size: 14px;
            opacity: 0.7;
        }

        .vs-divider {
            width: 60px;
            height: 60px;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: bold;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .winner-indicator {
            position: absolute;
            top: -5px;
            right: -5px;
            width: 30px;
            height: 30px;
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            color: #333;
        }

        .analysis-button {
            display: block;
            margin: 40px auto;
            padding: 15px 40px;
            background: linear-gradient(135deg, #00d4ff, #0099cc);
            border: none;
            border-radius: 30px;
            color: white;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(0, 212, 255, 0.3);
        }

        .analysis-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(0, 212, 255, 0.4);
        }

        .summary-section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-top: 40px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .summary-title {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 20px;
            text-align: center;
        }

        .summary-stats {
            display: flex;
            justify-content: space-around;
            gap: 20px;
        }

        .summary-item {
            text-align: center;
            flex: 1;
        }

        .summary-item .label {
            font-size: 14px;
            opacity: 0.8;
            margin-bottom: 8px;
        }

        .summary-item .value {
            font-size: 20px;
            font-weight: 700;
        }

        .summary-item .winner {
            color: #ffd700;
        }

        @media (max-width: 768px) {
            .companies-header {
                padding: 0 20px;
            }

            .company-name {
                font-size: 24px;
            }

            .comparison-row {
                gap: 20px;
            }

            .metric-card {
                padding: 20px;
            }

            .metric-value {
                font-size: 24px;
            }

            .vs-divider {
                width: 50px;
                height: 50px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div></div>
        <div class="user-icon">üë§</div>
    </div>

    <div class="main-container">
        <div class="vs-header">
            <h1 class="vs-title">VS</h1>
        </div>

        <div class="companies-header">
            <div class="company-name company-left" id="company1Name">ÏÇºÏÑ±Ï†ÑÏûê</div>
            <div class="company-name company-right" id="company2Name">LG</div>
        </div>

        <div class="comparison-grid">
            <!-- Îß§Ï∂úÏï° ÎπÑÍµê -->
            <div class="comparison-row">
                <div class="metric-card left" id="revenue1">
                    <div class="metric-label">Îß§Ï∂úÏï°</div>
                    <div class="metric-value">258.9Ï°∞</div>
                    <div class="metric-unit">Ïõê</div>
                </div>
                <div class="vs-divider">VS</div>
                <div class="metric-card right" id="revenue2">
                    <div class="metric-label">Îß§Ï∂úÏï°</div>
                    <div class="metric-value">7.4Ï°∞</div>
                    <div class="metric-unit">Ïõê</div>
                </div>
            </div>

            <!-- ÏòÅÏóÖÏù¥Ïùµ ÎπÑÍµê -->
            <div class="comparison-row">
                <div class="metric-card left" id="operating1">
                    <div class="metric-label">ÏòÅÏóÖÏù¥Ïùµ</div>
                    <div class="metric-value">6.6Ï°∞</div>
                    <div class="metric-unit">Ïõê</div>
                </div>
                <div class="vs-divider">VS</div>
                <div class="metric-card right" id="operating2">
                    <div class="metric-label">ÏòÅÏóÖÏù¥Ïùµ</div>
                    <div class="metric-value">1.6Ï°∞</div>
                    <div class="metric-unit">Ïõê</div>
                </div>
            </div>

            <!-- ÏàúÏù¥Ïùµ ÎπÑÍµê -->
            <div class="comparison-row">
                <div class="metric-card left" id="net1">
                    <div class="metric-label">ÏàúÏù¥Ïùµ</div>
                    <div class="metric-value">15.5Ï°∞</div>
                    <div class="metric-unit">Ïõê</div>
                </div>
                <div class="vs-divider">VS</div>
                <div class="metric-card right" id="net2">
                    <div class="metric-label">ÏàúÏù¥Ïùµ</div>
                    <div class="metric-value">1.4Ï°∞</div>
                    <div class="metric-unit">Ïõê</div>
                </div>
            </div>

            <!-- Ï¥ùÏûêÏÇ∞ ÎπÑÍµê -->
            <div class="comparison-row">
                <div class="metric-card left" id="assets1">
                    <div class="metric-label">Ï¥ùÏûêÏÇ∞</div>
                    <div class="metric-value">455.9Ï°∞</div>
                    <div class="metric-unit">Ïõê</div>
                </div>
                <div class="vs-divider">VS</div>
                <div class="metric-card right" id="assets2">
                    <div class="metric-label">Ï¥ùÏûêÏÇ∞</div>
                    <div class="metric-value">30.3Ï°∞</div>
                    <div class="metric-unit">Ïõê</div>
                </div>
            </div>

            <!-- ROE ÎπÑÍµê -->
            <div class="comparison-row">
                <div class="metric-card left" id="roe1">
                    <div class="metric-label">ROE</div>
                    <div class="metric-value">4.3%</div>
                    <div class="metric-unit">ÏûêÍ∏∞ÏûêÎ≥∏Ïù¥ÏùµÎ•†</div>
                </div>
                <div class="vs-divider">VS</div>
                <div class="metric-card right" id="roe2">
                    <div class="metric-label">ROE</div>
                    <div class="metric-value">5.3%</div>
                    <div class="metric-unit">ÏûêÍ∏∞ÏûêÎ≥∏Ïù¥ÏùµÎ•†</div>
                </div>
            </div>

            <!-- Î∂ÄÏ±ÑÎπÑÏú® ÎπÑÍµê -->
            <div class="comparison-row">
                <div class="metric-card left" id="debt1">
                    <div class="metric-label">Î∂ÄÏ±ÑÎπÑÏú®</div>
                    <div class="metric-value">25.4%</div>
                    <div class="metric-unit">ÏïàÏ†ïÏÑ±</div>
                </div>
                <div class="vs-divider">VS</div>
                <div class="metric-card right" id="debt2">
                    <div class="metric-label">Î∂ÄÏ±ÑÎπÑÏú®</div>
                    <div class="metric-value">12.0%</div>
                    <div class="metric-unit">ÏïàÏ†ïÏÑ±</div>
                </div>
            </div>
        </div>

        <div class="summary-section">
            <h3 class="summary-title">ÎπÑÍµê ÏöîÏïΩ</h3>
            <div class="summary-stats">
                <div class="summary-item">
                    <div class="label">Îß§Ï∂ú Ïö∞ÏúÑ</div>
                    <div class="value winner" id="revenueWinner">ÏÇºÏÑ±Ï†ÑÏûê</div>
                </div>
                <div class="summary-item">
                    <div class="label">ÏàòÏùµÏÑ± Ïö∞ÏúÑ</div>
                    <div class="value winner" id="profitWinner">ÏÇºÏÑ±Ï†ÑÏûê</div>
                </div>
                <div class="summary-item">
                    <div class="label">ÏûêÏÇ∞ Í∑úÎ™®</div>
                    <div class="value winner" id="assetWinner">ÏÇºÏÑ±Ï†ÑÏûê</div>
                </div>
                <div class="summary-item">
                    <div class="label">ÏïàÏ†ïÏÑ± Ïö∞ÏúÑ</div>
                    <div class="value winner" id="stabilityWinner">LG</div>
                </div>
            </div>
        </div>

        <button class="analysis-button" onclick="openDetailAnalysis()">
            Í∏∞ÏóÖ ÎπÑÍµê Î∞îÎ°úÍ∞ÄÍ∏∞
        </button>
    </div>

    <div class="ai-chat" onclick="openAIChat()">
        AI
    </div>

    <script>
        // ÏÉòÌîå Îç∞Ïù¥ÌÑ∞ (Ïã§Ï†úÎ°úÎäî APIÏóêÏÑú Î∞õÏïÑÏò¥)
        const comparisonData = {
            "comparison_info": {
                "company1": {"corp_name": "ÏÇºÏÑ±Ï†ÑÏûê"},
                "company2": {"corp_name": "LG"}
            },
            "basic_financial_comparison": {
                "company1": {
                    "revenue": 258935494000000,
                    "operating_profit": 6566976000000,
                    "net_profit": 15487100000000,
                    "total_assets": 455905980000000
                },
                "company2": {
                    "revenue": 7445336000000,
                    "operating_profit": 1589013000000,
                    "net_profit": 1414258000000,
                    "total_assets": 30253085000000
                }
            },
            "financial_indicators_comparison": {
                "profitability": {
                    "company1": {"ROE": 4.311},
                    "company2": {"ROE": 5.312}
                },
                "stability": {
                    "company1": {"Î∂ÄÏ±ÑÎπÑÏú®": 25.36},
                    "company2": {"Î∂ÄÏ±ÑÎπÑÏú®": 11.98}
                }
            },
            "comparison_summary": {
                "revenue_comparison": {"winner": "ÏÇºÏÑ±Ï†ÑÏûê"},
                "profitability_comparison": {"winner": "ÏÇºÏÑ±Ï†ÑÏûê"},
                "asset_comparison": {"winner": "ÏÇºÏÑ±Ï†ÑÏûê"}
            }
        };

        function formatNumber(num) {
            if (num >= 1000000000000) {
                return (num / 1000000000000).toFixed(1) + 'Ï°∞';
            } else if (num >= 100000000) {
                return (num / 100000000).toFixed(0) + 'Ïñµ';
            }
            return num.toLocaleString();
        }

        function updateDashboard(data) {
            // Í∏∞ÏóÖÎ™Ö ÏóÖÎç∞Ïù¥Ìä∏
            document.getElementById('company1Name').textContent = data.comparison_info.company1.corp_name;
            document.getElementById('company2Name').textContent = data.comparison_info.company2.corp_name;

            const basic = data.basic_financial_comparison;
            const indicators = data.financial_indicators_comparison;

            // Îß§Ï∂úÏï°
            document.querySelector('#revenue1 .metric-value').textContent = formatNumber(basic.company1.revenue);
            document.querySelector('#revenue2 .metric-value').textContent = formatNumber(basic.company2.revenue);

            // ÏòÅÏóÖÏù¥Ïùµ
            document.querySelector('#operating1 .metric-value').textContent = formatNumber(basic.company1.operating_profit);
            document.querySelector('#operating2 .metric-value').textContent = formatNumber(basic.company2.operating_profit);

            // ÏàúÏù¥Ïùµ
            document.querySelector('#net1 .metric-value').textContent = formatNumber(basic.company1.net_profit);
            document.querySelector('#net2 .metric-value').textContent = formatNumber(basic.company2.net_profit);

            // Ï¥ùÏûêÏÇ∞
            document.querySelector('#assets1 .metric-value').textContent = formatNumber(basic.company1.total_assets);
            document.querySelector('#assets2 .metric-value').textContent = formatNumber(basic.company2.total_assets);

            // ROE
            document.querySelector('#roe1 .metric-value').textContent = indicators.profitability.company1.ROE + '%';
            document.querySelector('#roe2 .metric-value').textContent = indicators.profitability.company2.ROE + '%';

            // Î∂ÄÏ±ÑÎπÑÏú®
            document.querySelector('#debt1 .metric-value').textContent = indicators.stability.company1['Î∂ÄÏ±ÑÎπÑÏú®'] + '%';
            document.querySelector('#debt2 .metric-value').textContent = indicators.stability.company2['Î∂ÄÏ±ÑÎπÑÏú®'] + '%';

            // Ïö∞ÏúÑ ÌëúÏãú
            highlightWinners(data);

            // ÏöîÏïΩ ÏóÖÎç∞Ïù¥Ìä∏
            document.getElementById('revenueWinner').textContent = data.comparison_summary.revenue_comparison.winner;
            document.getElementById('profitWinner').textContent = data.comparison_summary.profitability_comparison.winner;
            document.getElementById('assetWinner').textContent = data.comparison_summary.asset_comparison.winner;

            // ÏïàÏ†ïÏÑ±ÏùÄ Î∂ÄÏ±ÑÎπÑÏú®Ïù¥ ÎÇÆÏùÄ Ï™ΩÏù¥ Ïö∞ÏúÑ
            const stabilityWinner = indicators.stability.company1['Î∂ÄÏ±ÑÎπÑÏú®'] < indicators.stability.company2['Î∂ÄÏ±ÑÎπÑÏú®']
                ? data.comparison_info.company1.corp_name
                : data.comparison_info.company2.corp_name;
            document.getElementById('stabilityWinner').textContent = stabilityWinner;
        }

        function highlightWinners(data) {
            const basic = data.basic_financial_comparison;
            const indicators = data.financial_indicators_comparison;

            // Îß§Ï∂úÏï° Ïö∞ÏúÑ
            if (basic.company1.revenue > basic.company2.revenue) {
                document.getElementById('revenue1').classList.add('winner');
                document.getElementById('revenue1').innerHTML += '<div class="winner-indicator">üëë</div>';
            } else {
                document.getElementById('revenue2').classList.add('winner');
                document.getElementById('revenue2').innerHTML += '<div class="winner-indicator">üëë</div>';
            }

            // ÏòÅÏóÖÏù¥Ïùµ Ïö∞ÏúÑ
            if (basic.company1.operating_profit > basic.company2.operating_profit) {
                document.getElementById('operating1').classList.add('winner');
                document.getElementById('operating1').innerHTML += '<div class="winner-indicator">üëë</div>';
            } else {
                document.getElementById('operating2').classList.add('winner');
                document.getElementById('operating2').innerHTML += '<div class="winner-indicator">üëë</div>';
            }

            // ÏàúÏù¥Ïùµ Ïö∞ÏúÑ
            if (basic.company1.net_profit > basic.company2.net_profit) {
                document.getElementById('net1').classList.add('winner');
                document.getElementById('net1').innerHTML += '<div class="winner-indicator">üëë</div>';
            } else {
                document.getElementById('net2').classList.add('winner');
                document.getElementById('net2').innerHTML += '<div class="winner-indicator">üëë</div>';
            }

            // Ï¥ùÏûêÏÇ∞ Ïö∞ÏúÑ
            if (basic.company1.total_assets > basic.company2.total_assets) {
                document.getElementById('assets1').classList.add('winner');
                document.getElementById('assets1').innerHTML += '<div class="winner-indicator">üëë</div>';
            } else {
                document.getElementById('assets2').classList.add('winner');
                document.getElementById('assets2').innerHTML += '<div class="winner-indicator">üëë</div>';
            }

            // ROE Ïö∞ÏúÑ
            if (indicators.profitability.company1.ROE > indicators.profitability.company2.ROE) {
                document.getElementById('roe1').classList.add('winner');
                document.getElementById('roe1').innerHTML += '<div class="winner-indicator">üëë</div>';
            } else {
                document.getElementById('roe2').classList.add('winner');
                document.getElementById('roe2').innerHTML += '<div class="winner-indicator">üëë</div>';
            }

            // Î∂ÄÏ±ÑÎπÑÏú® Ïö∞ÏúÑ (ÎÇÆÏùÄ Í≤ÉÏù¥ Ï¢ãÏùå)
            if (indicators.stability.company1['Î∂ÄÏ±ÑÎπÑÏú®'] < indicators.stability.company2['Î∂ÄÏ±ÑÎπÑÏú®']) {
                document.getElementById('debt1').classList.add('winner');
                document.getElementById('debt1').innerHTML += '<div class="winner-indicator">üëë</div>';
            } else {
                document.getElementById('debt2').classList.add('winner');
                document.getElementById('debt2').innerHTML += '<div class="winner-indicator">üëë</div>';
            }
        }

        function openDetailAnalysis() {
            alert('ÏÉÅÏÑ∏ Î∂ÑÏÑù ÌéòÏù¥ÏßÄÎ°ú Ïù¥ÎèôÌï©ÎãàÎã§.');
        }

        function openAIChat() {
            alert('AI Ï±ÑÌåÖÏùÑ ÏãúÏûëÌï©ÎãàÎã§.');
        }

        // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú Îç∞Ïù¥ÌÑ∞ ÏóÖÎç∞Ïù¥Ìä∏
        window.onload = function() {
            updateDashboard(comparisonData);
        };

        // Ïã§Ï†ú API Îç∞Ïù¥ÌÑ∞Î°ú ÏóÖÎç∞Ïù¥Ìä∏ÌïòÎäî Ìï®Ïàò
        function loadComparisonData(apiData) {
            updateDashboard(apiData.data);
        }
    </script>
</body>
</html>